!function(a){"use strict";a.module("user_management.sms-verification",["ngRoute"])}(window.angular),function(a){"use strict";var b=a.module("user_management.sms-verification");b.provider("userManagementSmsVerificationConfig",function(){var a="",b="/activation-code",c="/resend-confirmation-sms";return{$get:function(){return{apiRoot:function(){return a},verificationEndpoint:function(){return b},verificationResendEndpoint:function(){return c}}},setApiRoot:function(b){a=b},setVerificationEndpoint:function(a){b=a},setVerificationResendEndpoint:function(a){c=a}}})}(window.angular),function(a){"use strict";var b=a.module("user_management.sms-verification");b.factory("smsVerificationFactory",["$http","userManagementSmsVerificationConfig",function(a,b){var c=b.apiRoot(),d={post:function(d,e){return a({method:"POST",url:c+b.verificationEndpoint(),data:{phone_number:e,activation_code:d}})},resend:function(d){return a({method:"POST",url:c+b.verificationResendEndpoint(),data:{phone_number:d}})}};return{verify:d}}])}(window.angular),function(a){"use strict";var b=a.module("user_management.sms-verification");b.directive("smsVerify",["$parse","$routeParams","smsVerificationFactory",function(b,c,d){return{restrict:"A",scope:!0,templateUrl:"templates/user_management/sms-verification/verify_form.html",link:function(c,e,f){if(a.isDefined(f.data)){c.$watch(f.data,function(a){c.data=a});var g=b(f.data).assign;c.$watch("data",function(a){g(c.$parent,a)})}c.verify=function(){c.verified=!1,d.verify.post(c.data.activation_code,c.data.phone_number).then(function(a){c.status=a.status,c.verified=!0},function(a){c.status=a.status,c.errors=a.data,400===a.status&&"Invalid or expired code."===a.data.detail&&(c.invalid=!0)})},c.resend=function(){c.resent=!1,d.verify.resend(c.data.phone_number).then(function(a){c.resent=!0,c.status=a.status},function(a){c.errors=a.data})}}}}])}(window.angular);